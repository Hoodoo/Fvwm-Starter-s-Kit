#  This is left-click desktop menu and a showcase for
#  dynamically recreated menu syntax and simple PipeRead usage,
#  featuring file browser pipe menu (see functions file)
#  and applications menu (generated by script in scripts 
#  subfolder, credit goes to Victor Ananjevsky), script
#  usage is described in the script file), I just run it
#  redirecting output to applications_menu file.
#
#  The menu is created and defined to be recreated by
#  function in first two lines.
#
#  Following lines are function which creates menu each time
#  you call it.
#
#  For now leave the rest as it is.
#
#  Notice the parentheses used with PipeRead command,
#  a MissingSubmenuFunction command which would replace 
#  any undefined submenu within main menu and its submenus
#  by Directory menu (needed for file browser pipe menu 
#  to work).
#  
#  The ampersand sign precedes the key to be
#  used as a hotkey for the menu item in 
#  the context of this given menu.
#
#
#  Exit item depends on shutdown-dialog.py,
#  get it here if you need. 
#  http://www.penguindevelopment.org/index.php?title=Release:shutdown-dialog 
#
#  You will have to edit sudoers for the dialog
#  to work.

AddToMenu MainMenu MainMenu title
+ DynamicPopupAction Function MakeMainMenu

AddToFunc MakeMainMenu
+ I DestroyMenu recreate MainMenu
+ I PipeRead 'echo "AddToMenu MainMenu \'$(date +%d.%m) - $(date +%H:%M)\'"' 
+ I AddToMenu MainMenu MissingSubmenuFunction FuncFvwmMenuDirectory 
+ I AddToMenu MainMenu "----------------------" Nop
+ I AddToMenu MainMenu "Text &Editor" Exec exec $[fvwm_editor]
+ I AddToMenu MainMenu "&Terminal" Exec exec $[fvwm_terminal]
+ I AddToMenu MainMenu "&Web Browser" Exec exec $[fvwm_browser]
+ I AddToMenu MainMenu "Mail &Client" Exec exec $[fvwm_mail]
+ I AddToMenu MainMenu "&File Manager" Exec exec $[fvwm_filemanager]
+ I AddToMenu MainMenu "Internet Messe&nger" Exec exec $[fvwm_im]
+ I AddToMenu MainMenu "Music &Player" Exec exec $[fvwm_player]
+ I AddToMenu MainMenu "  " Nop
+ I AddToMenu MainMenu "&Applications" Popup Applications
+ I AddToMenu MainMenu "P&laces" Popup $[HOME]
+ I AddToMenu MainMenu "Prefere&nces" Popup Preferences
+ I AddToMenu MainMenu "  " Nop
+ I AddToMenu MainMenu "Re&start" Restart
+ I AddToMenu MainMenu "E&xit" Exec exec shutdown-dialog.py

